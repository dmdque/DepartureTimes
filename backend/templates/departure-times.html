<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Departure Times</title>
    <script src="frontend/bower_components/jquery/dist/jquery.min.js"></script>
    <script src="frontend/bower_components/underscore/underscore-min.js"></script>
    <script src="frontend/bower_components/backbone/backbone-min.js"></script>
    <script src="frontend/bower_components/underscore/underscore-min.js"></script>
    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <link rel="stylesheet" type="text/css" href="frontend/bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="frontend/styles/test.css">
</head>

<body>
<div class="container">
    <h1>Departure Times</h1>
    <h2>List View</h2>

    <div>Your location is: </div>
    <div class="form-group">
        User custom location:<br>
        <input type="checkbox" name="custom_location" class="form-control" checked>
        <!--show only if checkbox is checked-->
        <input id="lat" type="number" name="latitude" class="form-control" value="37.78"></input>
        <input id="lon" type="number" name="longitude" class="form-control" value="-122.2"></input>
    </div>
    <button onclick="getDepartureTimes()">Get</button>

    <div id="mapholder"></div>
    <div id="test"></div>
    <div id="closest_busses"></div>
    <div id="closest_bus_stops"></div>
    <div id="demo"></div>

<script type="text/template" id="busStop-template">
<div class="view">
    <div>The bus name is <%= title %></div>
    <% _.each(predictions, function(prediction) { %>
        <div>Departure: <%= Math.trunc(prediction.seconds / 60) %>:<%= prediction.seconds % 60%></div>
    <% }) %>
</script>

<script type="text/template" id="busStops-template">
<div class="Bus Stops"></div>
    <div class="row">
        <div class="col-md-6">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Bus Title</th>
                        <th>Prediction</th>
                        <th>Other</th>
                    </tr>
                </thead>
                <tbody>
                    <% _.each(collection, function(model) { %>
                        <tr>
                            <td><%= model.stopTag %></td>
                            <td><%= model.title %></td>

                            <td>
                            <% var comma_flag = false %>
                            <% _.each(model.predictions, function(prediction) { %>
                                <% if (comma_flag) { %>
                                    <span>, </span>
                                <% } else { %>
                                    <% comma_flag = true %>
                                <% } %>
                                <%= Math.trunc(prediction.seconds / 60) %>:<%= prediction.seconds % 60 %>
                            <% }); %>
                            </td>
                            <td>other</td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
        </div>
</div>
</script>

<script src="frontend/scripts/main.js"></script>
<script src="frontend/scripts/models/busStop.js"></script>
<script src="frontend/scripts/views/busStop.js"></script>
<script src="frontend/scripts/collections/busStops.js"></script>
<script src="frontend/scripts/views/busStops.js"></script>
<script src="frontend/test.js"></script>
</body>
</html>
